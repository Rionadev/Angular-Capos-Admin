<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card margin-bottom-10">
                    <div class="content add-content"
                        style="display: flex; justify-content: space-between; align-items: center;">
                        <p class="category">A list of all of your products. <a href="#">Need help?</a></p>
                        <button class="btn btn-sm btn-info btn-fill" (click)="toggleContent()">
                            <!-- <i class="pe-7s-next-2" style="font-size: 2rem;"></i> -->
                            Add Product</button>
                    </div>
                </div>

                <div class="card margin-bottom-10" *ngIf="isContentVisible">
                    <div class="header">
                        <h4 class="title">Add a Product</h4>
                        <p class="category">Here is a form for adding a product attribute</p>
                    </div>
                    <div class="content">
                        <form (ngSubmit)="saveRow(currentRow)">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Product Name:</label>
                                        <input type="text" class="form-control" placeholder="Name"
                                            [(ngModel)]="currentRow.name" name="name" required />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Category:</label>
                                        <input type="text" class="form-control" placeholder="Category"
                                            [(ngModel)]="currentRow.category" name="category" required />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Brand:</label>
                                        <input type="text" class="form-control" placeholder="Brand"
                                            [(ngModel)]="currentRow.brand" name="brand" required />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Supplier:</label>
                                        <input type="text" class="form-control" placeholder="Supplier"
                                            [(ngModel)]="currentRow.supplier" name="supplier" required />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Attributes:</label>
                                        <input type="text" class="form-control"
                                            placeholder="Attributes (comma-separated)"
                                            [(ngModel)]="currentRow.attributes" name="attributes" />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Tags:</label>
                                        <input type="text" class="form-control" placeholder="Tags (comma-separated)"
                                            [(ngModel)]="currentRow.tags" name="tags" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Status:</label>
                                        <select class="form-control" [(ngModel)]="currentRow.status" name="status">
                                            <option value="">Select Status</option>
                                            <option value="Active">Active</option>
                                            <option value="Inactive">Inactive</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Barcode:</label>
                                        <input type="text" class="form-control" placeholder="Barcode"
                                            [(ngModel)]="currentRow.Barcode" name="Barcode" required />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Retail Price:</label>
                                        <input type="number" class="form-control" placeholder="Retail Price"
                                            [(ngModel)]="currentRow.retailPrice" name="retailPrice" required />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Inventory:</label>
                                        <input type="text" class="form-control" placeholder="Inventory"
                                            [(ngModel)]="currentRow.inventory" name="inventory" required />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Active:</label>
                                        <input type="checkbox" [(ngModel)]="currentRow.active" name="active" />
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Touch:</label>
                                        <input type="checkbox" [(ngModel)]="currentRow.touch" name="touch" />
                                    </div>
                                </div>
                            </div>

                            <div class="clearfix">
                                <button type="submit" class="btn btn-sm btn-info btn-fill pull-right">{{ currentRow.id ?
                                    'Update' : 'Add' }}</button>
                                <button class="btn btn-sm btn-danger btn-fill pull-right"
                                    (click)="cancelEdit(currentRow)" *ngIf="currentRow.id">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card margin-bottom-0">
                    <div class="content add-content">
                        <div class="row"
                            style="display: flex; align-items: center; margin: 0 2rem; justify-content: space-between;">
                            <div style="display: flex; flex-direction: row; gap: 1rem;">
                                <div>
                                    <input type="text" class="form-control" placeholder="Search for products"
                                        [(ngModel)]="searchQuery" (input)="filterRows()" />
                                </div>
                                <div>
                                    <select class="form-control" [(ngModel)]="selectedType" (change)="filterRows()">
                                        <option value="">Select Product Type</option>
                                        <option value="Type A">Type A</option>
                                        <option value="Type B">Type B</option>
                                        <option value="Type C">Type C</option>
                                    </select>
                                </div>
                                <div>
                                    <select class="form-control" [(ngModel)]="selectedBrand" (change)="filterRows()">
                                        <option value="">Select Brand</option>
                                        <option value="Brand X">Brand X</option>
                                        <option value="Brand Y">Brand Y</option>
                                        <option value="Brand Z">Brand Z</option>
                                    </select>
                                </div>
                                <div>
                                    <select class="form-control" [(ngModel)]="selectedSupplier" (change)="filterRows()">
                                        <option value="">Select Supplier</option>
                                        <option value="Supplier 1">Supplier 1</option>
                                        <option value="Supplier 2">Supplier 2</option>
                                        <option value="Supplier 3">Supplier 3</option>
                                    </select>
                                </div>
                                <div>
                                    <select class="form-control" [(ngModel)]="selectedStatus" (change)="filterRows()">
                                        <option value="">Select Status</option>
                                        <option value="Active">Active</option>
                                        <option value="Inactive">Inactive</option>
                                    </select>
                                </div>
                            </div>
                            <div style="display: flex; gap: 1rem; margin-left: auto;">
                                <button class="btn btn-sm btn-danger btn-fill" (click)="clearFilters()">Clear
                                    Filters</button>
                                <button class="btn btn-sm btn-info btn-fill" (click)="filterRows()">Search</button>
                            </div>
                        </div>
                    </div>


                    <div class="card">
                        <div class="content table-responsive table-full-width">
                            <table class="table table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Category</th>
                                        <th>Brand</th>
                                        <th>Supplier</th>
                                        <th>Attributes</th>
                                        <th>Tags</th>
                                        <th>Status</th>
                                        <th>Barcode</th>
                                        <th>Retail Price</th>
                                        <th>Inventory</th>
                                        <th>Active</th>
                                        <th>Touch</th>
                                        <th>Created</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of paginatedRows">
                                        <td *ngIf="!row.isEditing">{{ row.name }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.name" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.category }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.category" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.brand }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.brand" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.supplier }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.supplier" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.attributes }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.attributes" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.tags }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.tags" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.status }}</td>
                                        <td *ngIf="row.isEditing">
                                            <select [(ngModel)]="row.status" class="form-control">
                                                <option value="Active">Active</option>
                                                <option value="Inactive">Inactive</option>
                                            </select>
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.Barcode }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.Barcode" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.retailPrice | currency }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input type="number" [(ngModel)]="row.retailPrice" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.inventory }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input [(ngModel)]="row.inventory" class="form-control" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.active ? 'Yes' : 'No' }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input type="checkbox" [(ngModel)]="row.active" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.touch ? 'Yes' : 'No' }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input type="checkbox" [(ngModel)]="row.touch" />
                                        </td>

                                        <td *ngIf="!row.isEditing">{{ row.created | date }}</td>
                                        <td *ngIf="row.isEditing">
                                            <input type="date" [(ngModel)]="row.created" class="form-control" />
                                        </td>

                                        <td>

                                            <button *ngIf="!(row.isEditing)" class="btn btn-info btn-simple btn-xs"
                                                (click)="editRow(row)">
                                                <i class="pe-7s-note" style="font-size: large;"></i>
                                            </button>
                                            <button *ngIf="!(row.isEditing)" class="btn btn-danger btn-simple btn-xs"
                                                (click)="deleteRow(row.id)">
                                                <i class="pe-7s-trash" style="font-size: large;"></i>
                                            </button>
                                            <button *ngIf="row.isEditing" class="btn btn-info btn-simple btn-xs"
                                                (click)="saveRow(row)">
                                                <i class="pe-7s-diskette" style="font-size: large;"></i>
                                            </button>
                                            <button *ngIf="row.isEditing" class="btn btn-danger btn-simple btn-xs"
                                                (click)="cancelEdit(row)">
                                                <i class="pe-7s-back" style="font-size: large;"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="pagination">
                                <button (click)="prevPage()" [disabled]="currentPage === 1">
                                    <i class="pe-7s-angle-left" style="font-size: 2rem"></i></button>
                                <span>Page {{ currentPage }} of {{ totalPages }}</span>
                                <button (click)="nextPage()" [disabled]="currentPage === totalPages">
                                    <i class="pe-7s-angle-right" style="font-size: 2rem"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>